# ðŸŽ¨ arting-2apiï¼šAI ç»˜ç”»ã€Œä¸‡èƒ½è½¬æ¢æ’å¤´ã€

![License](https://img.shields.io/badge/License-Apache_2.0-blue.svg)
![Python Version](https://img.shields.io/badge/Python-3.10+-brightgreen.svg)
![Docker](https://img.shields.io/badge/Docker-Ready-blue.svg?logo=docker)
![GitHub Repo](https://img.shields.io/badge/GitHub-lzA6/arting--2api-violet.svg)

> "æˆ‘ä»¬ä¸æ˜¯åœ¨ç¼–å†™ä»£ç ï¼Œæˆ‘ä»¬æ˜¯åœ¨æž„å»ºè¿žæŽ¥æ€æƒ³çš„æ¡¥æ¢ã€‚" â€”â€” æŸä½ä¸æ„¿é€éœ²å§“åçš„å¼€å‘è€…

`arting-2api` æ˜¯ä¸€ä¸ªåˆ›æ–°çš„å¼€æºé¡¹ç›®ï¼Œå®ƒå°±åƒä¸€ä¸ªä¸‡èƒ½è½¬æ¢æ’å¤´ï¼Œèƒ½å¤Ÿå°† [Arting.ai](https://arting.ai/) çš„å¼ºå¤§ç»˜ç”»èƒ½åŠ›ï¼Œæ— ç¼è½¬æ¢æˆä¸Ž **OpenAI DALL-E**ã€**Stable Diffusion WebUI** ç­‰ä¸šç•Œä¸»æµåº”ç”¨å®Œå…¨å…¼å®¹çš„ API æŽ¥å£ã€‚

è¿™æ„å‘³ç€ï¼Œä½ çŽ°åœ¨å¯ä»¥ç”¨æœ€ç†Ÿæ‚‰çš„å·¥å…·å’Œå®¢æˆ·ç«¯ï¼Œå…è´¹äº«å— Arting.ai çš„é«˜è´¨é‡ç»˜ç”»æœåŠ¡ï¼

---

## âœ¨ æ ¸å¿ƒä»·å€¼ä¸Žç‰¹è‰²

### ðŸ’¸ æžè‡´æ€§ä»·æ¯”
å°†ä¼˜ç§€çš„å…è´¹ç»˜ç”»æœåŠ¡æŽ¥å…¥åˆ°éœ€è¦ä»˜è´¹ API çš„å·¥ä½œæµä¸­ï¼Œå®žçŽ°"é›¶æˆæœ¬"é«˜è´¨é‡å‡ºå›¾ã€‚

### ðŸ§© æ— ç¼å…¼å®¹
æ— éœ€ä¿®æ”¹çŽ°æœ‰å·¥å…·ï¼æ— è®ºæ˜¯æ”¯æŒ OpenAI å›¾åƒæŽ¥å£çš„å®¢æˆ·ç«¯ï¼Œè¿˜æ˜¯ä¸º Stable Diffusion WebUI è®¾è®¡çš„æ’ä»¶ï¼Œéƒ½èƒ½ç›´æŽ¥ä½¿ç”¨ã€‚

### ðŸš€ ä¸€é”®éƒ¨ç½²
é€šè¿‡ Docker å°†å¤æ‚çš„çŽ¯å¢ƒé…ç½®åŽ‹ç¼©æˆç®€å•å‘½ä»¤ï¼ŒçœŸæ­£å®žçŽ°"å¼€ç®±å³ç”¨"ã€‚

### ðŸŒ å¤šæ¨¡å¼é€‚é…
- **OpenAI åŽŸç”Ÿæ¨¡å¼** (`/v1/images/generations`)ï¼šå…¼å®¹æ‰€æœ‰ DALL-E æŽ¥å£åº”ç”¨
- **æ™ºèƒ½èŠå¤©æ¨¡å¼** (`/v1/chat/completions`)ï¼šåœ¨èŠå¤©ä¸­ç›´æŽ¥ç”Ÿæˆå›¾ç‰‡
- **SD-WebUI æ¨¡å¼** (`/sdapi/v1/txt2img`)ï¼šè®© SD å·¥ä½œæµç”¨ä¸Š Arting æ¨¡åž‹

### ðŸ’– å¼€æ”¾ç²¾ç¥ž
é¼“åŠ±æŽ¢ç´¢ã€æ”¹é€ å’Œåˆ†äº«ï¼Œç”¨æŠ€æœ¯åŠ›é‡å°†å°é—­æœåŠ¡é‡æ–°å¸¦å›žå¼€æ”¾ç”Ÿæ€ã€‚

---

## ðŸŽ¯ é€‚ç”¨åœºæ™¯

### ðŸ‘¨â€ðŸ’» å¼€å‘è€…
åœ¨è‡ªæœ‰åº”ç”¨ä¸­é›†æˆå…è´¹ã€é«˜è´¨é‡çš„ AI ç»˜ç”»èƒ½åŠ›

### ðŸŽ¨ è®¾è®¡å¸ˆä¸Žè‰ºæœ¯å®¶
åœ¨ç†Ÿæ‚‰çš„ UI ç•Œé¢ä¸­ä½“éªŒä¸åŒæ¨¡åž‹é£Žæ ¼

### ðŸ¤– AI çˆ±å¥½è€…
ä½Žæˆæœ¬å­¦ä¹  API è½¬æ¢ã€åå‘ä»£ç†ç­‰æŠ€æœ¯çš„å®žè·µå¹³å°

### ðŸ’° ç²¾æ‰“ç»†ç®—çš„ç”¨æˆ·
å¯»æ‰¾ OpenAI DALL-E ç­‰ä»˜è´¹æœåŠ¡çš„å®Œç¾Žæ›¿ä»£æ–¹æ¡ˆ

---

## ðŸš€ å¿«é€Ÿå¼€å§‹

### çŽ¯å¢ƒè¦æ±‚
- **Docker** & **Docker Compose** [å®‰è£…æŒ‡å—](https://www.docker.com/get-started/)

### éƒ¨ç½²æ­¥éª¤

**1. èŽ·å–é¡¹ç›®**
```bash
git clone https://github.com/lzA6/arting-2api.git
cd arting-2api
```

**2. é…ç½®è®¤è¯ä»¤ç‰Œ ðŸ”‘**
```bash
# å¤åˆ¶çŽ¯å¢ƒé…ç½®æ¨¡æ¿
cp .env.example .env
```

èŽ·å– `ARTING_AUTH_TOKEN`ï¼š
- ç™»å½• [Arting.ai](https://arting.ai/)
- æŒ‰ `F12` æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œåˆ‡æ¢åˆ° `Network` é¢æ¿
- ç”Ÿæˆä¸€å¼ å›¾ç‰‡ï¼Œåœ¨ç½‘ç»œè¯·æ±‚ä¸­æ‰¾åˆ°å¯¹ `api.arting.ai` çš„è¯·æ±‚
- å¤åˆ¶ `Authorization` è¯·æ±‚å¤´çš„å€¼
- ç²˜è´´åˆ° `.env` æ–‡ä»¶çš„ `ARTING_AUTH_TOKEN` ä¸­

**3. å¯åŠ¨æœåŠ¡**
```bash
docker-compose up -d
```

**å®Œæˆï¼** ðŸŽ‰ æœåŠ¡å·²åœ¨ `http://localhost:8090` è¿è¡Œ

---

## ðŸ› ï¸ API ä½¿ç”¨æŒ‡å—

### Web UI æµ‹è¯•
è®¿é—® `http://localhost:8090/` ä½¿ç”¨å†…ç½®æµ‹è¯•ç•Œé¢

### OpenAI å®¢æˆ·ç«¯é…ç½®
- **API Base URL**: `http://localhost:8090/v1`
- **API Key**: `.env` ä¸­è®¾ç½®çš„ `API_MASTER_KEY`ï¼ˆé»˜è®¤ä¸º `1`ï¼‰

å…¼å®¹å®¢æˆ·ç«¯ï¼š
- [NextChat](https://github.com/ChatGPTNextWeb/ChatGPT-Next-Web)
- [LobeChat](https://github.com/lobehub/lobe-chat)
- å…¶ä»–æ”¯æŒ OpenAI æ ¼å¼çš„åº”ç”¨

### Stable Diffusion WebUI é›†æˆ
å°†å¤–éƒ¨ API æŒ‡å‘ï¼š`http://localhost:8090/sdapi/v1/txt2img`

---

## ðŸ”¬ æŠ€æœ¯æž¶æž„

### æ ¸å¿ƒè®¾è®¡ç†å¿µï¼šAPI é€‚é…å™¨æ¨¡å¼

`arting-2api` å……å½“äº†ä¸€ä¸ªæ™ºèƒ½ç¿»è¯‘å®˜ï¼Œåœ¨ä¸åŒ API åè®®é—´è¿›è¡Œå®žæ—¶è½¬æ¢ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    OpenAI Format    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    Arting Format    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚                  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚             â”‚
â”‚   Your Client   â”‚                     â”‚   arting-2api    â”‚                     â”‚  Arting.ai  â”‚
â”‚                 â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚                  â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    Image URL/Data   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    Polling Result   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆè¯¦è§£

| ç»„ä»¶ | ä½œç”¨ | æŠ€æœ¯é€‰åž‹ç†ç”± |
|------|------|--------------|
| **FastAPI** | æ ¸å¿ƒ Web æ¡†æž¶ | ðŸš€ å¼‚æ­¥é«˜æ€§èƒ½ï¼Œé€‚åˆå¤„ç†å¹¶å‘è½®è¯¢è¯·æ±‚ |
| **Cloudscraper** | ç»•è¿‡ Cloudflare ä¿æŠ¤ | ðŸ›¡ï¸ æ¨¡æ‹ŸçœŸå®žæµè§ˆå™¨è¡Œä¸ºï¼Œç¡®ä¿æœåŠ¡ç¨³å®š |
| **Docker & Nginx** | å®¹å™¨åŒ–ä¸Žåå‘ä»£ç† | ðŸ“¦ çŽ¯å¢ƒéš”ç¦»ï¼Œç®€åŒ–éƒ¨ç½²ï¼Œæå‡æ€§èƒ½ |
| **è½®è¯¢æœºåˆ¶** | å¼‚æ­¥ä»»åŠ¡çŠ¶æ€æ£€æŸ¥ | ðŸ“ž å®šæœŸæŸ¥è¯¢ä»»åŠ¡ç»“æžœï¼Œä¿è¯æ•°æ®åŒæ­¥ |
| **Pydantic** | æ•°æ®éªŒè¯ä¸Žé…ç½®ç®¡ç† | ðŸ“ ç±»åž‹å®‰å…¨ï¼Œé…ç½®éªŒè¯ï¼Œä»£ç å¥å£® |
| **aiohttp** | å¼‚æ­¥ HTTP å®¢æˆ·ç«¯ | âš¡ï¸ é«˜æ•ˆå¤„ç†å›¾ç‰‡ä¸‹è½½ç­‰ I/O å¯†é›†åž‹æ“ä½œ |

### æ ¸å¿ƒå·¥ä½œæµç¨‹

1. **è¯·æ±‚æŽ¥æ”¶**ï¼šæŽ¥æ”¶æ ‡å‡† OpenAI æ ¼å¼è¯·æ±‚
2. **æ ¼å¼è½¬æ¢**ï¼šå°†è¯·æ±‚å‚æ•°è½¬æ¢ä¸º Arting.ai æ ¼å¼
3. **ä»»åŠ¡æäº¤**ï¼šå‘ Arting.ai æäº¤ç»˜ç”»ä»»åŠ¡
4. **çŠ¶æ€è½®è¯¢**ï¼šå®šæœŸæ£€æŸ¥ä»»åŠ¡å®ŒæˆçŠ¶æ€
5. **ç»“æžœè¿”å›ž**ï¼šèŽ·å–å›¾ç‰‡ URL å¹¶è½¬æ¢ä¸ºå®¢æˆ·ç«¯æœŸæœ›æ ¼å¼

---

## ðŸ“‚ é¡¹ç›®ç»“æž„

```
arting-2api/
â”œâ”€â”€ ðŸ³ Docker é…ç½®
â”‚   â”œâ”€â”€ Dockerfile           # å®¹å™¨æž„å»ºå®šä¹‰
â”‚   â””â”€â”€ docker-compose.yml   # æœåŠ¡ç¼–æŽ’é…ç½®
â”œâ”€â”€ ðŸ”§ æ ¸å¿ƒé…ç½®
â”‚   â”œâ”€â”€ .env.example         # çŽ¯å¢ƒå˜é‡æ¨¡æ¿
â”‚   â””â”€â”€ nginx.conf          # Nginx åå‘ä»£ç†é…ç½®
â”œâ”€â”€ ðŸ Python æºç 
â”‚   â”œâ”€â”€ main.py              # FastAPI åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ requirements.txt     # Python ä¾èµ–åˆ—è¡¨
â”‚   â””â”€â”€ app/
â”‚       â”œâ”€â”€ core/
â”‚       â”‚   â””â”€â”€ config.py    # é…ç½®ç®¡ç†
â”‚       â”œâ”€â”€ providers/
â”‚       â”‚   â”œâ”€â”€ base_provider.py    # Provider åŸºç±»
â”‚       â”‚   â””â”€â”€ arting_provider.py  # Arting.ai é€‚é…å™¨
â”‚       â””â”€â”€ utils/
â”‚           â””â”€â”€ sse_utils.py # æœåŠ¡å™¨å‘é€äº‹ä»¶å·¥å…·
â””â”€â”€ ðŸŒ é™æ€èµ„æº
    â””â”€â”€ static/              # Web UI ç•Œé¢æ–‡ä»¶
        â”œâ”€â”€ index.html
        â”œâ”€â”€ style.css
        â””â”€â”€ script.js
```

---

## ðŸ—ºï¸ å‘å±•è·¯çº¿å›¾

### ðŸŽ¯ çŸ­æœŸç›®æ ‡ï¼ˆv1.1ï¼‰
- [ ] **æ€§èƒ½ä¼˜åŒ–**ï¼šå®žçŽ°è¯·æ±‚ç¼“å­˜æœºåˆ¶
- [ ] **é”™è¯¯å¤„ç†**ï¼šå¢žå¼ºå¼‚å¸¸å¤„ç†å’Œç”¨æˆ·åé¦ˆ
- [ ] **æ–‡æ¡£å®Œå–„**ï¼šæ·»åŠ æ›´å¤šä½¿ç”¨ç¤ºä¾‹å’Œæ•…éšœæŽ’æŸ¥æŒ‡å—

### ðŸš€ ä¸­æœŸè§„åˆ’ï¼ˆv2.0ï¼‰
- [ ] **WebSocket æ”¯æŒ**ï¼šæ›¿æ¢è½®è¯¢æœºåˆ¶ï¼Œå®žçŽ°å®žæ—¶è¿›åº¦æ›´æ–°
- [ ] **å¤š Provider æ”¯æŒ**ï¼šé›†æˆ Midjourneyã€DreamStudio ç­‰æœåŠ¡
- [ ] **å›¾ç”Ÿå›¾åŠŸèƒ½**ï¼šæ”¯æŒå›¾åƒåˆ°å›¾åƒçš„è½¬æ¢

### ðŸŒŸ é•¿æœŸæ„¿æ™¯
- [ ] **åˆ†å¸ƒå¼æž¶æž„**ï¼šæ”¯æŒå¤šèŠ‚ç‚¹éƒ¨ç½²å’Œè´Ÿè½½å‡è¡¡
- [ ] **ç”¨æˆ·ç®¡ç†ç³»ç»Ÿ**ï¼šæ·»åŠ ä½¿ç”¨ç»Ÿè®¡å’Œé…é¢ç®¡ç†
- [ ] **æ’ä»¶ç”Ÿæ€**ï¼šå»ºç«‹ç¬¬ä¸‰æ–¹æ’ä»¶å¼€å‘è§„èŒƒ

---

## ðŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿Žå„ç§å½¢å¼çš„è´¡çŒ®ï¼

### å¦‚ä½•å‚ä¸Ž
1. **æŠ¥å‘Šé—®é¢˜**ï¼šåœ¨ GitHub Issues ä¸­æäº¤ bug æŠ¥å‘Šæˆ–åŠŸèƒ½å»ºè®®
2. **ä»£ç è´¡çŒ®**ï¼šFork é¡¹ç›®ï¼Œåˆ›å»ºåŠŸèƒ½åˆ†æ”¯ï¼Œæäº¤ Pull Request
3. **æ–‡æ¡£æ”¹è¿›**ï¼šä¼˜åŒ–æ–‡æ¡£ã€ç¿»è¯‘æˆ–æ·»åŠ ä½¿ç”¨æ•™ç¨‹
4. **æŠ€æœ¯è®¨è®º**ï¼šå‚ä¸ŽæŠ€æœ¯æ–¹æ¡ˆè®¾è®¡å’Œæž¶æž„ä¼˜åŒ–

### å¼€å‘çŽ¯å¢ƒæ­å»º
```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/lzA6/arting-2api.git
cd arting-2api

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# é…ç½®çŽ¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶é…ç½®è®¤è¯ä¿¡æ¯

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
uvicorn main:app --reload --port 8090
```

### è´¡çŒ®è€…åè®®
- éµå¾ªçŽ°æœ‰çš„ä»£ç é£Žæ ¼å’Œé¡¹ç›®ç»“æž„
- ç¡®ä¿æäº¤å‰é€šè¿‡æ‰€æœ‰æµ‹è¯•
- æ›´æ–°ç›¸å…³æ–‡æ¡£å’Œç¤ºä¾‹
- åœ¨ Pull Request ä¸­è¯¦ç»†æè¿°å˜æ›´å†…å®¹

---

## ðŸ“œ å¼€æºåè®®

æœ¬é¡¹ç›®é‡‡ç”¨ **Apache 2.0** å¼€æºè®¸å¯è¯ã€‚

**å…è®¸äº‹é¡¹ï¼š**
- âœ… è‡ªç”±ä½¿ç”¨ã€ä¿®æ”¹å’Œåˆ†å‘ä»£ç 
- âœ… ç”¨äºŽä¸ªäººæˆ–å•†ä¸šé¡¹ç›®
- âœ… ä¸“åˆ©æŽˆæƒ

**è¦æ±‚äº‹é¡¹ï¼š**
- ðŸ“ ä¿ç•™åŽŸå§‹ç‰ˆæƒå’Œè®¸å¯è¯å£°æ˜Ž
- â„¹ï¸ å£°æ˜Žå¯¹æºä»£ç çš„ä¿®æ”¹

**ç¦æ­¢äº‹é¡¹ï¼š**
- âŒ ä½¿ç”¨é¡¹ç›®å•†æ ‡
- âŒ è¿½ç©¶åŽŸä½œè€…è´£ä»»

---

## ðŸ†˜ å¸¸è§é—®é¢˜

### Q: å¦‚ä½•èŽ·å–æœ€æ–°çš„ Arting.ai è®¤è¯ä»¤ç‰Œï¼Ÿ
A: ä»¤ç‰Œå¯èƒ½å®šæœŸå¤±æ•ˆï¼Œè¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ›´æ–°ï¼š
1. é‡æ–°ç™»å½• Arting.ai
2. æŒ‰ F12 æ‰“å¼€å¼€å‘è€…å·¥å…·
3. ç”Ÿæˆæ–°å›¾ç‰‡å¹¶æ•èŽ·æœ€æ–°è¯·æ±‚
4. å¤åˆ¶æ–°çš„ Authorization å¤´å€¼
5. æ›´æ–° .env æ–‡ä»¶å¹¶é‡å¯æœåŠ¡

### Q: æœåŠ¡å¯åŠ¨å¤±è´¥æ€Žä¹ˆåŠžï¼Ÿ
A: æ£€æŸ¥ä»¥ä¸‹å¸¸è§é—®é¢˜ï¼š
- Docker æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ
- .env æ–‡ä»¶æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼ˆæ— å¤šä½™ç©ºæ ¼ï¼‰
- ç«¯å£ 8090 æ˜¯å¦è¢«å…¶ä»–ç¨‹åºå ç”¨
- ç½‘ç»œè¿žæŽ¥æ˜¯å¦æ­£å¸¸

### Q: å¦‚ä½•æŸ¥çœ‹æœåŠ¡æ—¥å¿—ï¼Ÿ
A: ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼š
```bash
docker-compose logs -f
```

---

## ðŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºè¿™ä¸ªé¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ã€æµ‹è¯•è€…å’Œæ–‡æ¡£ç¼–å†™è€…ã€‚ç‰¹åˆ«æ„Ÿè°¢ï¼š

- **Arting.ai** å›¢é˜Ÿæä¾›ä¼˜ç§€çš„å…è´¹ç»˜ç”»æœåŠ¡
- **FastAPI** ç¤¾åŒºæä¾›å‡ºè‰²çš„ Web æ¡†æž¶
- æ‰€æœ‰å¼€æºé¡¹ç›®çš„è´¡çŒ®è€…ï¼Œä½ ä»¬çš„å·¥ä½œè®©è¿™ä¸ªä¸–ç•Œæ›´ç¾Žå¥½

---

## ðŸ“ž æ”¯æŒä¸Žè”ç³»

- **GitHub Issues**: [æäº¤é—®é¢˜ä¸Žå»ºè®®](https://github.com/lzA6/arting-2api/issues)
- **æ–‡æ¡£æ›´æ–°**: æ¬¢è¿Žæäº¤æ–‡æ¡£æ”¹è¿›çš„ Pull Request
- **åŠŸèƒ½è®¨è®º**: åœ¨ GitHub Discussions ä¸­å‚ä¸ŽæŠ€æœ¯äº¤æµ

---

**è®°ä½ï¼Œæ¯ä¸€ä¸ªä¼Ÿå¤§çš„åˆ›æ„éƒ½å§‹äºŽä¸€æ¬¡ç®€å•çš„å°è¯•ã€‚çŽ°åœ¨ï¼ŒåŽ»åˆ›é€ å±žäºŽä½ çš„è§†è§‰å¥‡è¿¹å§ï¼** âœ¨
